{% extends "core/base.html" %}
{% load static i18n %}

{% block page_title_prefix %}
    {{ item.name|default:_("მარაგის ელემენტი") }} -
{% endblock page_title_prefix %}

{% block page_header_title %}
    {{ item.name|default:_("მარაგის ელემენტი") }}
{% endblock page_header_title %}

{% block page_actions %}
    <a href="{% url 'warehouse:stockitem_list' %}" class="btn btn-outline-secondary">
        <i class="ti ti-arrow-left me-1"></i> დაბრუნება სიაში
    </a>
    {% if perms.warehouse.change_stockitem %}
    <a href="{% url 'warehouse:stockitem_edit' item.pk %}" class="btn btn-primary">
        <i class="ti ti-edit me-1"></i> რედაქტირება
    </a>
    {% endif %}
    {% if perms.warehouse.delete_stockitem %}
    <a href="{% url 'warehouse:stockitem_delete' item.pk %}" class="btn btn-danger">
        <i class="ti ti-trash me-1"></i> წაშლა
    </a>
    {% endif %}
{% endblock page_actions %}

{% block content %}
<div class="row row-cards justify-content-center">
    <div class="col-lg-8">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <div>
                    <h3 class="card-title mb-0">
                        <i class="ti ti-package"></i> ელემენტის დეტალები
                    </h3>
                </div>
                <div>
                    {% if item.is_below_minimum_stock %}
                        <span class="badge bg-warning text-dark">{% trans "ნაკლები მარაგი" %}</span>
                    {% else %}
                        <span class="badge bg-success">{% trans "მარაგშია" %}</span>
                    {% endif %}
                </div>
            </div>
            <div class="card-body">
                <dl class="row mb-0">
                    <dt class="col-sm-4">ID / SKU</dt>
                    <dd class="col-sm-8">{{ item.item_id|default:item.pk }}</dd>

                    <dt class="col-sm-4">დასახელება</dt>
                    <dd class="col-sm-8">{{ item.name|default:"-" }}</dd>

                    <dt class="col-sm-4">აღწერა</dt>
                    <dd class="col-sm-8">{{ item.description|linebreaksbr|default:"-" }}</dd>

                    <dt class="col-sm-4">კატეგორია</dt>
                    <dd class="col-sm-8">{{ item.category.name|default:"-" }}</dd>

                    <dt class="col-sm-4">მომწოდებელი</dt>
                    <dd class="col-sm-8">{{ item.supplier.name|default:"-" }}</dd>

                    <dt class="col-sm-4">მარაგში რაოდენობა</dt>
                    <dd class="col-sm-8">{{ item.quantity_on_hand|default:"0" }}</dd>

                    <dt class="col-sm-4">მინ. მარაგი</dt>
                    <dd class="col-sm-8">{{ item.minimum_stock_level|default:"-" }}</dd>

                    <dt class="col-sm-4">ერთეულის ფასი</dt>
                    <dd class="col-sm-8">
                        {% if item.unit_price is not None %}
                            {{ item.unit_price }} ₾
                        {% else %}
                            მიუწვდომელია
                        {% endif %}
                    </dd>

                    <dt class="col-sm-4">საცავის მდებარეობა</dt>
                    <dd class="col-sm-8">{{ item.storage_location|default:"-" }}</dd>

                    <dt class="col-sm-4">ბოლო შევსების თარიღი</dt>
                    <dd class="col-sm-8">{{ item.last_restocked_date|date:"Y-m-d"|default:"-" }}</dd>

                    <dt class="col-sm-4">ვადის გასვლის თარიღი</dt>
                    <dd class="col-sm-8">{{ item.expiry_date|date:"Y-m-d"|default:"-" }}</dd>

                    <dt class="col-sm-4">შენიშვნები</dt>
                    <dd class="col-sm-8">{{ item.notes|linebreaksbr|default:"-" }}</dd>

                    <dt class="col-sm-4">დამატების თარიღი</dt>
                    <dd class="col-sm-8">{{ item.date_added|date:"Y-m-d H:i"|default:"-" }}</dd>

                    <dt class="col-sm-4">ბოლო განახლება</dt>
                    <dd class="col-sm-8">{{ item.last_updated|date:"Y-m-d H:i"|default:"-" }}</dd>
                </dl>
            </div>
            <div class="card-footer text-end">
                <a href="{% url 'warehouse:stockitem_list' %}" class="btn btn-outline-secondary">
                    <i class="ti ti-arrow-left me-1"></i> დაბრუნება სიაში
                </a>
                {% if perms.warehouse.change_stockitem %}
                <a href="{% url 'warehouse:stockitem_edit' item.pk %}" class="btn btn-primary">
                    <i class="ti ti-edit me-1"></i> რედაქტირება
                </a>
                {% endif %}
                {% if perms.warehouse.delete_stockitem %}
                <a href="{% url 'warehouse:stockitem_delete' item.pk %}" class="btn btn-danger">
                    <i class="ti ti-trash me-1"></i> წაშლა
                </a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}