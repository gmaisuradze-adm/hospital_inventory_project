{% extends "core/base.html" %}
{% load static i18n %} {# Added i18n for potential future use in default texts #}

{# Version: 1.1 - 2025-05-26 11:18:56 UTC - gmaisuradze-adm - Corrected request_admin_list to admin_request_list #}
{% block title %}{{ page_title|default:_("Dashboard") }} - {% trans "Hospital IT Inventory" %}{% endblock %}

{% block content %}
<div class="container mt-5">
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        {% endfor %}
    {% endif %}

    <div class="px-4 py-5 my-5 text-center">
        {# Assuming hospital-logo.png is in core/static/core/images/ #}
        <img class="d-block mx-auto mb-4" src="{% static 'core/images/hospital-logo.png' %}" alt="{% trans 'Hospital Logo' %}" width="72" height="auto">
        <h1 class="display-5 fw-bold">{{ page_title|default:_("IT Management Dashboard") }}</h1>
        <div class="col-lg-6 mx-auto">
            <p class="lead mb-4">{% blocktrans with username=user.username %}Welcome back, {{ username }}! This is your central hub for managing IT resources.{% endblocktrans %}</p>
            <p>{% trans "From here, you can navigate to various sections of the IT inventory and request management system." %}</p>
            <hr>
            <div class="d-grid gap-2 d-sm-flex justify-content-sm-center">
                {% if user.is_staff %}
                    <a href="{% url 'inventory:equipment_list' %}" class="btn btn-primary btn-lg px-4 gap-3">{% trans "View Inventory" %}</a>
                    <a href="{% url 'warehouse:stockitem_list' %}" class="btn btn-outline-secondary btn-lg px-4">{% trans "Warehouse Stock" %}</a>
                    {# Corrected URL name for admin requests list #}
                    <a href="{% url 'requests_app:admin_request_list' %}" class="btn btn-outline-info btn-lg px-4">{% trans "Manage Requests" %}</a>
                {% else %}
                     {# Corrected URL name for user requests list - placeholder, points to admin list for now #}
                     <a href="{% url 'requests_app:admin_request_list' %}" class="btn btn-primary btn-lg px-4 gap-3">{% trans "My IT Requests" %}</a>
                     {# Placeholder for request creation - this URL doesn't exist yet #}
                     {# You will need to create a 'request_create' URL in requests_app.urls and a corresponding view #}
                     <a href="#" class="btn btn-success btn-lg px-4 disabled" aria-disabled="true">{% trans "Submit New Request" %}</a> {# Added disabled state until functional #}
                {% endif %}
            </div>
        </div>
    </div>

    {% if user.is_staff %}
    <div class="row mt-5">
        <div class="col-md-4 mb-3">
            <div class="card text-center h-100">
                <div class="card-header">
                    {% trans "Inventory Overview" %}
                </div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{% trans "Total Equipment" %}</h5>
                    <p class="card-text fs-3 mt-auto">{{ total_equipment_count|default:"N/A" }}</p>
                    <a href="{% url 'inventory:equipment_list' %}" class="btn btn-sm btn-outline-primary mt-2">{% trans "Go to Inventory" %}</a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card text-center h-100">
                <div class="card-header">
                    {% trans "Warehouse Stock" %}
                </div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{% trans "Total Stock Items" %}</h5>
                    <p class="card-text fs-3 mt-auto">{{ total_stock_items_count|default:"N/A" }}</p>
                    <a href="{% url 'warehouse:stockitem_list' %}" class="btn btn-sm btn-outline-secondary mt-2">{% trans "Go to Warehouse" %}</a>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="card text-center h-100">
                <div class="card-header">
                    {% trans "Active IT Requests" %}
                </div>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{% trans "Pending & In Progress" %}</h5>
                    <p class="card-text fs-3 mt-auto">{{ active_requests_count|default:"N/A" }}</p>
                    {# Corrected URL name for admin requests list #}
                    <a href="{% url 'requests_app:admin_request_list' %}" class="btn btn-sm btn-outline-info mt-2">{% trans "Manage Requests" %}</a>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

</div>
{% endblock %}